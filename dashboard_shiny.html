<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>IBE 2023 Dashboard</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="dashboard_shiny_files/libs/clipboard/clipboard.min.js"></script>
<script src="dashboard_shiny_files/libs/quarto-html/quarto.js"></script>
<script src="dashboard_shiny_files/libs/quarto-html/popper.min.js"></script>
<script src="dashboard_shiny_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="dashboard_shiny_files/libs/quarto-html/anchor.min.js"></script>
<link href="dashboard_shiny_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dashboard_shiny_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="dashboard_shiny_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="dashboard_shiny_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="dashboard_shiny_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="dashboard_shiny_files/libs/quarto-dashboard/quarto-dashboard.js"></script>
<script src="dashboard_shiny_files/libs/quarto-dashboard/stickythead.js"></script>
<script src="dashboard_shiny_files/libs/quarto-dashboard/datatables.min.js" kdttablesentinel="true"></script>
<script src="dashboard_shiny_files/libs/quarto-dashboard/pdfmake.min.js" kdttablesentinel="true"></script>
<script src="dashboard_shiny_files/libs/quarto-dashboard/vfs_fonts.js" kdttablesentinel="true"></script>
<script src="dashboard_shiny_files/libs/quarto-dashboard/web-components.js" type="module"></script>
<script src="dashboard_shiny_files/libs/quarto-dashboard/components.js"></script>
<link href="dashboard_shiny_files/libs/quarto-dashboard/datatables.min.css" rel="stylesheet" kdttablesentinel="true">


</head>

<body class="quarto-dashboard dashboard-fill dashboard-sidebar fullcontent">

<header id="quarto-dashboard-header">
<nav class="navbar navbar-expand-md slim" data-bs-theme="dark">
  <div class="navbar-container container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#dashboard-collapse" aria-controls="dashboard-collapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>    


    <div class="navbar-brand-container">       

      <div class="navbar-title">
        <div class="navbar-title-text"><a href="#">IBE 2023 Dashboard</a></div>
        
        
      </div>
    </div>
<div id="dashboard-collapse" class="navbar-collapse collapse"><ul class="navbar-nav navbar-nav-scroll me-auto" role="tablist"><li class="nav-item" role="presentation"><a id="tab-main-content" class="nav-link active" data-bs-toggle="tab" role="tab" data-bs-target="#main-content" data-scrolling="false" href="#main-content" aria-controls="main-content" aria-selected="true"><span class="nav-link-text">Main Content</span></a></li><li class="nav-item" role="presentation"><a id="tab-data" class="nav-link" data-bs-toggle="tab" role="tab" data-bs-target="#data" data-scrolling="false" href="#data" aria-controls="data" aria-selected="false"><span class="nav-link-text">Data</span></a></li></ul></div></div>
</nav>
</header>
<div class="page-layout-custom quarto-dashboard-content bslib-gap-spacing html-fill-container bslib-page-fill quarto-dashboard-pages dashboard-sidebar-container">  

<div class="bslib-sidebar-layout html-fill-item html-fill-container" data-bslib-sidebar-open="desktop" data-bslib-sidebar-init="true" data-bslib-sidebar-border="false" data-bslib-sidebar-border-radius="false"><div class="main html-fill-container html-fill-item"><div class="sidebar-content html-fill-item html-fill-container">
<div class="tab-content bslib-grid html-fill-item html-fill-container" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div id="main-content" class="dashboard-page tab-pane show active html-fill-item html-fill-container" data-orientation="columns" aria-labelledby="tab-main-content">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-columns: minmax(3em, 100fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-rows: minmax(3em, 1fr); grid-auto-columns: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-title="Plot" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-header"><div class="card-title html-fill-item html-fill-container">Plot</div></div>
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div class="plotly html-widget html-widget-output shiny-report-size shiny-report-theme html-fill-item html-fill-container" id="selected_plot" style="width:100%;height:800px;"></div>
</div>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div>
</div>
</div>
</div><div id="data" class="dashboard-page tab-pane grid-skip html-fill-item html-fill-container" data-orientation="columns" aria-labelledby="tab-data">
<div class="html-fill-item html-fill-container bslib-grid" style="display: grid; grid-template-columns: minmax(3em, 1fr);
grid-auto-rows: minmax(0, 1fr);">
<div class="card cell html-fill-item html-fill-container bslib-card" data-title="Data Table" data-bslib-card-init="" data-require-bs-caller="card()" data-full-screen="false">
<div class="card-header"><div class="card-title html-fill-item html-fill-container">Data Table</div></div>
<div class="card-body html-fill-item html-fill-container">
<div class="cell-output-display html-fill-item html-fill-container">
<div class="datatables html-widget html-fill-item html-fill-container" id="htmlwidget-41a3cda922c13f6a1c58" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-41a3cda922c13f6a1c58">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,3,2,2,2,2,2,2,2,3,4],["D01","D01","D01","D01","D01","D01","D01","D01","D01","D02","D02","D02","D02","D02","D02","D03","D03","D03","D03","D03","D03","D03","D03","D03","D03","D03","D04","D04","D04","D04","D04","D04","D04","D04","D04","D05","D05","D06","D06","D06","D06","D06","D06","D06","D06","D06","D06","D07","D07","D07","D07","D07","D08","D08","D08","D08","D08","D08","D09","D09","D09","D09","D09","D10","D10","D10","D10","D10","D10","D10","D10","P1","P1","P1",null,"P2","P2","P2","P2","P2","P2","P2",null,null],["i01","i02","i03","i05","i06","i07","i08","i81","i27","i10","i11","i12","i13","i14","i16","i17","i18","i19","i20","i21","i22","i23","i24","i25","i82","i29","i30","i31","i32","i33","i34","i35","i36","i37","i80","i39","i41","i45","i46","i47","i48","i49","i50","i51","i52","i53","i54","i55","i56","i57","i58","i59","i60","i61","i62","i63","i64","i65","i66","i67","i69","i70","i71","i72","i73","i74","i75","i76","i77","i78","i79","D01","D02","D03","P1","D04","D05","D06","D07","D08","D09","D10","P2","IBE"],["Rendimento monetário disponível mediano por adulto equivalente (preços constantes, 2015)","Património financeiro líquido dos particulares (per capita, preços constantes, 2015)","Património total líquido dos particulares (per capita, preços constantes, 2015)","Despesa de consumo final das famílias per capita  (preços constantes, 2015)","Desigualdade na distribuição do rendimento (S80/S20)","Coeficiente de Gini para o rendimento monetário disponível por adulto equivalente","Coeficiente de Gini para a remuneração mensal líquida do trabalho por conta de outrem","Proporção de pessoas satisfeitas com o estado atual da economia do país","Rendimento líquido mediano dos trabalhadores por conta de outrém (preços constantes, 2015)","Taxa de risco de pobreza (60% da mediana), após transferências sociais","Taxa de intensidade de pobreza","Intensidade laboral per capita muito reduzida","Taxa de privação material","Endividamento dos particulares (dívida financeira) em percentagem do rendimento disponível","Taxa de sobrecarga das despesas em habitação","Taxa de emprego (15 e mais anos)","Proporção de trabalhadores com 25 e mais anos com contrato de trabalho a termo","Taxa de desemprego","Proporção de desempregados de longa duração (12 e mais meses)","Taxa de desemprego da população com nível de escolaridade completo correspondente ao ensino superior","Taxa de desemprego da população dos 15 aos 34 anos","Inativos por 100 empregados","Subemprego dos trabalhadores a tempo parcial","Disparidade salarial entre homens e mulheres (valores não ajustados)","Proporção de pessoas que pensam ser provável ou muito provável perder o seu emprego nos seis meses seguintes","Proporção da população desempregada inscrita num Centro de Emprego do IEFP que não recebe nenhum tipo de subsídio relacionado com o desemprego","Esperança de vida à nascença","Taxa de mortalidade infantil","Esperança de vida em saúde","Taxa de mortalidade padronizada (&lt;65 anos), por doenças do aparelho circulatório, por 100 000 habitantes","Taxa de mortalidade padronizada, por tumores malignos, por 100 000 habitantes","Proporção da população residente que avalia o seu estado de saúde como bom ou muito bom","Proporção da população que refere limitação na realização de atividades habituais devido a um problema de saúde prolongado","Proporção da população que avalia positivamente os serviços de saúde","Taxa de mortalidade padronizada, por suicídio, por 100 mil habitantes","Proporção da população empregada a trabalhar habitualmente 49 ou mais horas por semana (profissão principal)","Índice de conciliação do trabalho com as responsabilidades familiares","Abandono precoce de educação e formação (18-24 anos)","Proporção de pessoas (30-34 anos), com nível de escolaridade completo correspondente ao ensino superior","Número médio de anos de escolaridade completa da população ativa","Aprendizagem ao longo da vida","Índice de consumos culturais","Taxa de jovens com idade entre 15 e 24 anos não empregados que não estão em educação ou formação","Índice de literacia","Doutoramentos por 100 mil habitantes em Portugal","Publicações científicas por 100 mil habitantes em Portugal","Patentes pedidas ao Gabinete Europeu de Patentes","Frequência de relacionamentos com familiares, amigos ou colegas de trabalho (pelo menos uma vez por semana)","Proporção de pessoas que têm com quem partilhar questões íntimas","Índice de confiança interpessoal","Grau de satisfação com a vida em geral","Grau de felicidade (feliz ou muito feliz)","Índice de participação eleitoral","Grau de interesse pela política","Índice de participação em atividades públicas","Índice de confiança nas instituições","Qualidade apercebida dos serviços públicos","Índice de governação","Taxa de criminalidade registada","Taxa de homicídio voluntário consumado","Taxa de mortalidade padronizada por acidentes com veículos a motor (por 100 mil habs.)","Proporção de pessoas que se sentem seguras quando passeiam sozinhas depois de escurecer","Grau de confiança na polícia","Água segura","Praias com Bandeira Azul","População servida por estações de tratamento de águas residuais (só Continente)","Total de emissões de gases com efeito de estufa","Exposição à poluição no ar a partículas PM2,5 (µg/m3)","População que reporta problemas de ruído na vizinhança da sua residência","Resíduos urbanos recolhidos com destino a aterro, per capita","População que reporta problemas de poluição, sujidade ou outros problemas ambientais na vizinhança da sua residência","Bem-estar económico","Vulnerabilidade económica","Emprego","Condições materiais de Vida","Saúde","Balanço vida-trabalho","Educação, conhecimento e competências","Relações sociais e bem-estar subjetivo","Participação cívica e governação","Segurança pessoal","Ambiente","Qualidade de Vida","IBE"],[0,1.4,4,15.9,0,0,0,0,4.6,22.7,27.7,80.2,21.8,66.09999999999999,79.3,65.2,42.7,73.90000000000001,35.2,65.8,77.09999999999999,74,100,64.40000000000001,35,40,0,38.2,8.4,17.6,65.09999999999999,0,12.1,0,49.4,39.3,74.59999999999999,0,1.5,0,0.3,40.4,48.2,10.4,17.1,9.699999999999999,0.2,90.2,25.2,2.8,16.8,30.2,24.1,2.3,4.9,11.6,0,48.7,76,26.6,0,59.6,0,83.90000000000001,26.1,0,77.3,43.2,35.1,51.2,29.8,2.9,49.6,61.2,20.6,21.2,57,12.8,33,15.3,32.5,43.3,27.2,25],[1.6,1.7,4.9,24.3,8.199999999999999,2.7,12.4,3.5,4.8,29.7,41.8,75.40000000000001,23.9,63.2,81.59999999999999,63.4,39.2,66.90000000000001,25.9,57,66.90000000000001,74.09999999999999,94.59999999999999,63,35,41.3,4.4,47.1,26.5,41.2,65.09999999999999,1.3,32.5,2.2,67.09999999999999,41.6,75.5,2.8,4,1.3,0,36.3,48.8,10.8,19.1,10.5,0,95.09999999999999,29.8,4.6,8.4,22,24.6,4,7.8,14.5,2.8,49.1,80.5,30,19.9,59,5.9,93.90000000000001,29.9,5.4,75.90000000000001,43.8,30.5,52.4,25.8,7.1,52.6,57,27.7,31.9,58.6,13.4,32,17.1,39.1,44.7,30.4,29.6],[2.1,2.1,6,28.6,13.6,8.800000000000001,15,7,4.9,32.8,37.3,70.59999999999999,29.2,59.4,80.5,63.9,35.1,66.90000000000001,21.8,56.1,65.59999999999999,74.90000000000001,94.59999999999999,69.09999999999999,36.2,39.2,11.4,52.9,32.1,52.1,73.3,6.9,34.9,4.5,70,44.5,75.90000000000001,2.2,5.7,3.9,0.3,34,51.8,11.3,20.9,13.7,0.5,100,34.4,6.3,0,13.8,22.1,5.7,10.8,17.4,5.5,38,79.2,25.2,35.6,58.5,11.8,96,31.1,21.6,78.7,53,32.8,49.7,28,9.800000000000001,51.6,56.7,30.6,37.6,60.2,14.4,30.9,16.6,42.1,48.9,32,31.6],[5.2,2.2,6.3,30.8,24.5,15.6,10.4,5.7,4.9,29.7,43.5,77.8,18.9,56.8,63.8,63.9,28.2,64.09999999999999,28,46.5,63,75.09999999999999,84.59999999999999,66.7,37.4,37.9,16.3,50,28.4,59.3,66.09999999999999,1.3,29.8,9.6,61.8,43.9,76.3,7.8,8.199999999999999,3.9,1,34.3,48.2,20.5,24.2,13.5,0.4,81.09999999999999,21,6.1,2.4,10.2,20.6,6,9.300000000000001,14.4,6.6,37.5,79.7,36.9,34.8,45.3,13,96.40000000000001,27.9,16.2,80,47,24.4,49.3,19.6,11.7,48.4,54.1,31.3,35.8,60.1,16.2,24.2,15.7,41.9,45.1,30.6,30.8],[2.4,1.1,6,33.2,27.2,18.4,11.1,4.5,5,34.4,41.2,72.2,16.5,56.5,62.6,63.9,23.5,66.90000000000001,27.4,51.8,67.2,74.8,84.59999999999999,63.9,38.7,37.6,19.9,52.9,29.3,59,64.90000000000001,7.9,30.1,14.7,61.2,42.2,76.7,12.2,12.7,6.5,3.9,35.6,54.2,29.7,24.4,16.6,0.6,62.3,7.6,5.9,4.8,6.5,19,6.3,7.8,11.3,7.7,40.6,73.8,34.3,41.5,32.2,14.1,96.90000000000001,27.6,29.7,81.3,68.59999999999999,37,43.8,43.1,12.1,47.2,54.6,31.5,37.8,59.4,19.6,17.4,15.5,39.2,53.5,30.6,30.8],[5.7,2.4,7.1,24.3,38.1,29.9,24.8,2.6,9.199999999999999,34.4,46.3,59.5,22.6,55.9,71.3,56.4,23.5,54.2,33.7,55.3,53.9,70,84.59999999999999,60.8,39.9,41.9,23,44.1,24.2,63.9,65.5,6.1,23.5,19.1,62.9,46.2,77,23.3,12.1,10.4,7.5,35.1,48.2,38.9,24.1,19.3,1,72.09999999999999,26.1,6.1,13.6,12.7,17.5,6.3,6.1,7.8,13.6,37.3,74.59999999999999,34.3,42.8,31.8,10.7,97.8,32,29.7,83.3,68.09999999999999,38.2,46.8,34.7,16,48.3,52.2,34.3,36.9,61.6,22,26.1,14.7,38.8,53.8,32.7,33.2],[3.7,2.7,7.2,28.5,35.4,26.5,31.3,0.7,8.5,33.6,43.5,61.9,18.5,56.3,82.2,52,16,44.4,18.4,50,44.4,67.90000000000001,83.3,49.8,41.1,38.9,28.3,76.5,27.4,69.09999999999999,65,10,25.6,23.5,59.4,48,77.40000000000001,30.6,17.8,11.7,5.2,37.7,47,38,26.8,22.3,0.5,82,44.6,6.3,22.3,18.8,16,6.3,4.3,4.2,19.4,31.4,75.3,34.3,46.1,31.4,7.3,97.40000000000001,37.3,37.8,85.8,78.90000000000001,42,46.1,45.3,16.1,49.3,46,33.2,42.8,62.7,23.8,34.8,13.6,38.9,58.8,35.3,34.7],[2.4,1.7,3,18.5,32.7,24.5,28.7,0.5,5.3,34.4,38.4,47.6,25.1,56.5,64.90000000000001,44.1,18.9,26.1,25.7,32.5,28.9,62.3,50.7,49.4,40.4,35.1,32.3,58.8,34.9,72.2,65.3,11,31.8,19.3,65.2,32.9,73.5,45.3,23.5,22.1,24.2,34.5,39.8,37.1,30.5,25.6,0.5,78.2,53.8,4.6,20.4,9.4,14.6,6.5,8.199999999999999,2.6,16.9,29.9,76.8,54.8,47.3,37.4,14.3,97.90000000000001,40.2,45.9,86.59999999999999,74.59999999999999,41.2,51.4,50.2,13,44.5,37.6,27.9,43.4,53.2,28.3,33.3,13.1,46.1,61,36.1,33.5],[0.6,1.7,0,11.3,27.2,26.5,21.5,0.3,5.2,28.1,19.8,31,21.4,58.4,58.6,35.2,23.5,4.2,24.9,8.800000000000001,3.2,57,37.9,41.2,39.6,33.3,35.8,50,53.5,75.7,66.7,6.9,48.1,15.1,62.5,30.6,69.7,52.2,25.8,26,20.9,30.9,31.9,36.2,35.4,28.7,0.5,74.3,63,3,18.5,0,13.4,6.8,12.1,1.1,14.3,31.1,78.3,34.3,64.3,43.3,21.3,98.2,39.9,48.6,87.40000000000001,77.3,38.5,58.4,51.6,10.5,36.2,28.1,22,46,50.2,28.9,31.8,13.1,48.3,62.5,36.4,31.3],[2.5,2.7,0.1,14.6,21.8,24.5,34.5,3.5,6.2,21.9,3.4,31,6.2,60.2,58.6,30.4,19.5,0,10.3,0,0,51.9,34.5,47.8,38.9,34.6,39.6,64.7,50.7,74.2,68.2,2,45,20.3,63.6,29.5,65.8,56.7,30.4,28.6,18.3,29.7,30.7,40.7,47.2,31.8,0.7,71.09999999999999,54.1,5.9,13.6,7,12.3,19.8,23.7,7.8,17.5,32.7,83,48,61.7,52.2,24.3,98.2,35.6,51.4,88.40000000000001,79.5,42.7,62.7,52,12.3,30.2,24.4,20.8,47.6,47.6,31.5,30.4,19,53.8,63.8,39.2,32.4],[4.1,3.8,1.8,19.7,27.2,27.9,33.9,6.7,6.4,21.9,10.7,46.8,0,62.1,53.4,34.4,19.5,18.3,4.2,23.7,17.5,52.8,39.8,41.6,38.1,30.6,44,64.7,22.3,59.3,68.7,1.5,12.5,25.5,54.8,29.5,61.9,60.8,33.2,32.5,18,32.1,41.6,45.2,48.5,33.9,1,68,45.2,8.800000000000001,8.699999999999999,14,11.3,32.8,35.2,14.6,20.6,32.5,87.09999999999999,61.7,60,61,27.3,98.40000000000001,40.8,51.4,88.2,83,39.3,62.7,56.9,14.6,32.5,29.1,24,39.3,45.7,34.7,28.9,24.5,59.4,65.09999999999999,40.2,34.5],[7.4,4.8,3.2,24.4,30,28.6,37.8,15,8.800000000000001,25.8,23.7,60.3,20.2,65.3,54,37.4,17.2,29.6,8.4,29.8,30.6,53.6,41.2,37.3,37.4,27.9,46.3,64.7,20.5,63.6,68.2,2.8,9,31.6,60.1,37,58,71.09999999999999,34.5,35,18.3,41,47.6,49.7,45,35.4,1.4,71.2,52.6,12.5,19.4,30,10.1,35,41.3,17.5,26.9,37.2,86.09999999999999,61.7,60.6,66.8,32.5,98.59999999999999,40.1,54.1,85.7,79.7,41.6,64,54.7,17.8,41.6,31.9,28.7,40.8,47.5,37.9,37.1,28,61.6,64.8,43.7,38.5],[7,5.4,4.8,27.1,35.4,31.3,37.1,23.4,7.3,31.2,22,66.7,33.3,68.5,63.2,40.5,16.6,39.4,12.3,37.7,37.9,54.8,45.8,45.5,35.4,25.9,49.6,55.9,30.2,63,65.90000000000001,5.9,19.7,37.8,68.5,39.9,53.7,70.3,40.2,36.3,18,47.6,51.8,47.1,45,38.7,1.6,74.5,59.9,16.3,30,46.1,7.6,37.2,47.4,20.4,33.1,36.2,90.40000000000001,82.2,64.5,72.59999999999999,37.8,98.7,45.3,56.8,87,80.09999999999999,41.2,64.40000000000001,59.6,19.9,47.5,35.6,32.3,44.1,46.8,39.7,45.3,30.3,69.5,66.59999999999999,47.2,42.1],[5.6,6.5,7.3,28.2,49,40.8,41.7,28.7,5.8,39.1,36.2,73,42,70.09999999999999,67.8,48,18.3,55.6,22.8,54.4,53.4,59.9,54.3,57.6,33.5,29.7,52.1,70.59999999999999,29.8,62.2,67.7,9,18.3,37.6,64.59999999999999,39.3,49.4,74.2,37.8,37.6,18.6,52.1,59.6,44.5,39.9,40.1,1.5,68.09999999999999,56.1,16.9,35,55.4,5,38,46.1,22.7,34.4,40.7,88.40000000000001,75.40000000000001,59.2,72.2,39.8,98.7,45.2,59.5,84,72.7,39.7,61.8,59.1,23.7,54.7,44.3,38.6,45.8,44.3,40.6,46.3,31.2,67,65.09999999999999,47.1,44.4],[10.5,7.2,9.9,35.2,49,42.2,41,33.9,8.4,39.8,48,78.59999999999999,51.4,72.3,73.59999999999999,53.7,18.9,69.7,34.7,64,66.3,62.9,63.2,65.09999999999999,31.5,36.5,52.7,52.9,30.2,65.59999999999999,67.90000000000001,10,17.6,37.3,68.09999999999999,42.8,45,76.40000000000001,37.8,38.9,20.3,56.7,65.09999999999999,41.9,43.2,41,2.5,61.7,52.3,17.6,39.9,64.7,2.5,38.8,44.8,24.9,35.8,39.2,90.09999999999999,54.8,60.7,71.90000000000001,41.8,98.59999999999999,45.9,59.5,85.90000000000001,72.8,41.6,58.8,60.4,26.4,60.6,51.5,43.5,44.7,43.9,42.4,47.2,31,63.8,65.40000000000001,47,45.9],[15.5,8,12.6,40.4,54.5,46.9,49.5,29.6,12,47.7,36.7,88.09999999999999,56.8,74.09999999999999,73.59999999999999,55.5,23.5,73.90000000000001,36.8,64.90000000000001,71,64.2,66.8,57.3,29.6,41.9,55.1,64.7,33,67.3,66.5,12,19.7,40.6,69.59999999999999,43.4,40.7,79.7,43.6,42.8,20.9,58.2,67.5,41.9,39,46.6,3.2,55.9,54,15,46.2,52,0,32.3,34,25.4,40.4,38.9,89.90000000000001,68.5,62.1,67.2,44.8,98.7,48.2,62.2,87.90000000000001,70.90000000000001,42.7,59,57.8,29.9,62.8,53.2,46.4,47.6,42,44.3,44.6,28.5,66.5,65.90000000000001,46.8,46.7],[16.2,9,15.5,25.4,35.4,34.7,47.6,25.3,13.8,30.5,21.5,85.7,58.8,72.40000000000001,82.8,47.6,33.4,71.09999999999999,54.6,60.5,58.4,53.7,67.90000000000001,55.3,27.6,45.7,57.7,79.40000000000001,35.3,68.8,70.09999999999999,15.1,22.8,43.8,71.3,52,36.4,83.90000000000001,49.5,45.4,18.6,0,54.8,41.9,34.9,52.1,2.9,50.1,55.7,12.3,52.6,39.4,1.1,25.7,23.3,25.9,45.1,37.2,96.59999999999999,68.5,71.09999999999999,62.4,47.9,98.8,49.4,59.5,91.90000000000001,77.40000000000001,33.6,50.8,59.1,24.8,58.6,52.3,42.3,51.6,44.2,38.4,42,26.4,69.3,65.09999999999999,46,44.9],[14.3,10.3,18.6,34.6,51.8,41.5,49.5,25.3,10.1,46.1,52,83.3,55.6,72.8,72.40000000000001,53.3,35.7,73.2,35.1,64.90000000000001,56.8,58.7,70.5,53.3,25.7,52.1,53.9,79.40000000000001,28.8,69.7,76.2,12.3,13.1,43.8,73.5,46.8,35.9,90.59999999999999,55,46.7,26.8,8.1,63.3,41.9,38.2,58,3.4,50.1,55.7,12.3,52.6,39.4,2.1,25.7,23.3,25.9,45.1,34.7,96.2,75.40000000000001,65.90000000000001,62.4,47.9,99,49.5,62.2,92.5,81.7,0,54.4,50.2,28.4,63.7,52.7,45.7,50.1,41.3,43.2,42,26.1,69.59999999999999,61.2,45.7,45.7],[null,8.5,17.3,42.2,null,null,50.7,null,null,null,null,null,62.1,75.8,77.59999999999999,58.6,41.5,77.5,32,71.90000000000001,66.09999999999999,63.6,71.8,null,null,45.9,53.9,73.5,null,null,null,10.5,16.3,null,null,48.6,null,91.09999999999999,54.1,47.1,30.1,44,71.09999999999999,null,42.4,53.5,3.7,null,null,null,null,null,null,null,null,null,null,34.8,84.8,68.5,null,null,null,null,51.3,null,90.59999999999999,84.8,18.7,null,56.4,29.1,66,55.2,47.3,50.1,42,47.9,42,26.4,66.90000000000001,64.7,46.7,46.9]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>nível<\/th>\n      <th>pai<\/th>\n      <th>Indicador<\/th>\n      <th>Nome<\/th>\n      <th>2004<\/th>\n      <th>2005<\/th>\n      <th>2006<\/th>\n      <th>2007<\/th>\n      <th>2008<\/th>\n      <th>2009<\/th>\n      <th>2010<\/th>\n      <th>2011<\/th>\n      <th>2012<\/th>\n      <th>2013<\/th>\n      <th>2014<\/th>\n      <th>2015<\/th>\n      <th>2016<\/th>\n      <th>2017<\/th>\n      <th>2018<\/th>\n      <th>2019<\/th>\n      <th>2020<\/th>\n      <th>2021<\/th>\n      <th>2022<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"bPaginate":false,"dom":"ifrt","language":{"info":"Showing _TOTAL_ entries"},"pageLength":15,"scrollX":true,"columnDefs":[{"className":"dt-right","targets":[1,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"nível","targets":1},{"name":"pai","targets":2},{"name":"Indicador","targets":3},{"name":"Nome","targets":4},{"name":"2004","targets":5},{"name":"2005","targets":6},{"name":"2006","targets":7},{"name":"2007","targets":8},{"name":"2008","targets":9},{"name":"2009","targets":10},{"name":"2010","targets":11},{"name":"2011","targets":12},{"name":"2012","targets":13},{"name":"2013","targets":14},{"name":"2014","targets":15},{"name":"2015","targets":16},{"name":"2016","targets":17},{"name":"2017","targets":18},{"name":"2018","targets":19},{"name":"2019","targets":20},{"name":"2020","targets":21},{"name":"2021","targets":22},{"name":"2022","targets":23}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,15,25,50,100]},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()">
    <template>Expand</template>
    <span class="bslib-full-screen-enter badge rounded-pill">
        <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" style="height:1em;width:1em;" aria-hidden="true" role="img"><path d="M20 5C20 4.4 19.6 4 19 4H13C12.4 4 12 3.6 12 3C12 2.4 12.4 2 13 2H21C21.6 2 22 2.4 22 3V11C22 11.6 21.6 12 21 12C20.4 12 20 11.6 20 11V5ZM4 19C4 19.6 4.4 20 5 20H11C11.6 20 12 20.4 12 21C12 21.6 11.6 22 11 22H3C2.4 22 2 21.6 2 21V13C2 12.4 2.4 12 3 12C3.6 12 4 12.4 4 13V19Z"></path></svg>
    </span>
</bslib-tooltip><script data-bslib-card-init="">bslib.Card.initializeAllCards();</script></div><div id="3ade8a4a-fb1d-4a6c-8409-ac45482d5fc9" class="hidden html-fill-item html-fill-container">

</div>
</div>
</div>
</div>
</div></div><aside id="bslib-sidebar-1" class="sidebar html-fill-container html-fill-item"><div class="html-fill-container html-fill-item">
<div class="cell-output-display no-overflow-x">
<div class="form-group shiny-input-container">
<label class="control-label" id="main_category-label" for="main_category">Select Main Category:</label>
<div>
<select id="main_category" class="shiny-input-select"><option value="Global" selected="">Global</option>
<option value="Condições materiais de vida">Condições materiais de vida</option>
<option value="Qualidade de vida">Qualidade de vida</option></select>
<script type="application/json" data-for="main_category" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
<div class="cell-output-display no-overflow-x">
<div id="sub_category" class="shiny-html-output"></div>
</div>
<div class="cell-output-display">
<div class="form-group shiny-input-container">
<div class="checkbox">
<label>
<input id="smooth" type="checkbox" class="shiny-input-checkbox">
<span>Smooth Lines</span>
</label>
</div>
</div>
</div>
</div></aside>
<button class="collapse-toggle" type="button" title="Toggle sidebar" aria-expanded="true" aria-controls="bslib-sidebar-1">
    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 16 16" class="bi bi-chevron-left collapse-icon" style="fill:currentColor;" aria-hidden="true" role="img">
      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path>
    </svg>
</button>
<script data-bslib-sidebar-init="">
bslib.Sidebar.initCollapsibleAll()
</script>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library(tidyverse)
library(plotly)
library(DT)
library(zoo)

# Load data and prepare functions
load("data/q1_3.RData")
load("data/q1_3_long.RData")
q1_3_long <- q1_3_long |> select(-c(Name, Abbreviation))

# Prepare data
df <- q1_3_long |>
  rename(
    year = Ano,
    value = Valor,
    variable_code = Indicador,
    variable_label = Abreviatura
  ) |>
  mutate(variable_label = paste(variable_code, variable_label, sep = ": "))

# Function to plot variables
plot_variables <- function(data,
                           variables_to_plot,
                           domain = NULL,
                           smooth = FALSE,
                           year_column = "year",
                           variable_column = "variable_code",
                           label_column = "variable_label",
                           value_column = "value") {
  
  plot_data <- data %>%
    filter(!!sym(variable_column) %in% variables_to_plot)
  
  if (smooth) {
    plot_data <- plot_data %>%
      group_by(!!sym(label_column)) %>%
      arrange(!!sym(year_column)) %>%
      mutate(
        smoothed_value = zoo::rollapply(!!sym(value_column), width = 3, FUN = mean, align = "center", fill = NA),
        smoothed_value = ifelse(is.na(smoothed_value), !!sym(value_column), smoothed_value),
        text = paste("Year:", !!sym(year_column), 
                     "<br>Value:", round(!!sym(value_column), 2),
                     "<br>Smoothed Value:", round(smoothed_value, 2),
                     "<br>Indicator:", !!sym(label_column))
      ) %>%
      ungroup()
    
    p <- ggplot(plot_data, aes(x = !!sym(year_column), y = smoothed_value, 
                               color = !!sym(label_column), group = !!sym(label_column),
                               text = text)) +
      geom_line() +
      labs(title = "Smoothed Data")
  } else {
    p <- ggplot(plot_data, aes(x = !!sym(year_column), y = !!sym(value_column), 
                               color = !!sym(label_column), group = !!sym(label_column),
                               text = paste("Year:", !!sym(year_column), 
                                            "<br>Value:", round(!!sym(value_column), 2), 
                                            "<br>Indicator:", !!sym(label_column)))) +
      geom_line() +
      geom_point() +
      labs(title = "Raw Data")
  }
  
  p <- p + theme_minimal(base_size = 12) +
    theme(legend.title = element_blank(),
          axis.text.x = element_text(angle = 45, hjust = 1, size = 8)) +
    labs(x = "Ano", y = "No.")
  
  if (!is.null(domain)) {
    domain_data <- plot_data %>% filter(!!sym(variable_column) == domain)
    if (smooth) {
      p <- p + geom_line(data = domain_data, aes(y = smoothed_value), size = 1.5)
    } else {
      p <- p + geom_line(data = domain_data, size = 1.5)
    }
  }
  
  p_plotly <- ggplotly(p, tooltip = "text") %>%
    layout(
      legend = list(title = list(text = '')),
      hovermode = "closest"
    )
  
  return(p_plotly)
}
</script>
 
<script type="application/shiny-prerendered" data-context="server">
output$sub_category <- renderUI({
  if (input$main_category == "Condições materiais de vida") {
    selectInput("cmv_domain", "Select Domain:",
                choices = c("All", unique(df$parent[df$parent %in% c("D01", "D02", "D03")])))
  } else if (input$main_category == "Qualidade de vida") {
    selectInput("qv_domain", "Select Domain:",
                choices = c("All", unique(df$parent[df$parent %in% c("D04", "D05", "D06", "D07", "D08", "D09", "D10")])))
  } else {
    return(NULL)
  }
})

selected_data <- reactive({
  if (input$main_category == "Global") {
    list(variables = c("P1", "P2", "IBE"), domain = NULL)
  } else if (input$main_category == "Condições materiais de vida") {
    if (!is.null(input$cmv_domain) && input$cmv_domain != "All") {
      indicators <- df %>% 
        filter(parent == input$cmv_domain) %>% 
        pull(variable_code) %>% 
        unique()
      list(variables = c(indicators, input$cmv_domain), domain = input$cmv_domain)
    } else {
      list(variables = c("D01", "D02", "D03", "P1"), domain = "P1")
    }
  } else {
    if (!is.null(input$qv_domain) && input$qv_domain != "All") {
      indicators <- df %>% 
        filter(parent == input$qv_domain) %>% 
        pull(variable_code) %>% 
        unique()
      list(variables = c(indicators, input$qv_domain), domain = input$qv_domain)
    } else {
      list(variables = c("D04", "D05", "D06", "D07", "D08", "D09", "D10", "P2"), domain = "P2")
    }
  }
})

output$selected_plot <- renderPlotly({
  data <- selected_data()
  plot_variables(
    data = df,
    variables_to_plot = data$variables,
    domain = data$domain,
    smooth = input$smooth
  )
})
</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.15.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.9.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["plotly-binding"]},{"type":"character","attributes":{},"value":["4.10.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["plotly.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["plotly"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["4.10.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-css"]},{"type":"character","attributes":{},"value":["0.0.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/css"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables-crosstalk.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["datatables-binding"]},{"type":"character","attributes":{},"value":["0.33"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["datatables.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["dt-core"]},{"type":"character","attributes":{},"value":["1.13.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/datatables"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/jquery.dataTables.min.js"]},{"type":"character","attributes":{},"value":["css/jquery.dataTables.min.css","css/jquery.dataTables.extra.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DT"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.33"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"character","attributes":{},"value":["1.2.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/crosstalk.min.js"]},{"type":"character","attributes":{},"value":["css/crosstalk.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["crosstalk"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.2.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74]}},"value":[{"type":"character","attributes":{},"value":["base","bslib","cachem","cli","colorspace","compiler","crosstalk","data.table","datasets","digest","dplyr","DT","evaluate","fansi","fastmap","forcats","generics","ggplot2","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","httr","jquerylib","jsonlite","knitr","later","lattice","lazyeval","lifecycle","lubridate","magrittr","memoise","methods","mime","munsell","pillar","pkgconfig","plotly","promises","purrr","R6","Rcpp","readr","rlang","rmarkdown","rstudioapi","sass","scales","shiny","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utf8","utils","vctrs","viridisLite","withr","xfun","xtable","yaml","zoo"]},{"type":"character","attributes":{},"value":["4.4.1","0.7.0","1.1.0","3.6.3","2.1-0","4.4.1","1.2.1","1.15.4","4.4.1","0.6.36","1.1.4","0.33","0.24.0","1.0.6","1.2.0","1.0.0","0.1.3","3.5.1","1.7.0","4.4.1","4.4.1","4.4.1","0.3.5","1.1.3","0.5.8.1","1.6.4","1.6.15","1.4.7","0.1.4","1.8.8","1.48","1.3.2","0.22-6","0.2.2","1.0.4","1.9.3","2.0.3","2.0.1","4.4.1","0.12","0.5.1","1.9.0","2.0.3","4.10.4","1.3.0","1.0.2","2.5.1","1.0.13","2.1.5","1.1.4","2.27","0.16.0","0.4.9","1.3.0","1.9.1","4.4.1","1.8.4","1.5.1","3.2.1","1.3.1","1.2.1","2.0.0","0.3.0","4.4.1","0.4.0","1.2.4","4.4.1","0.6.5","0.4.2","3.0.0","0.46","1.8-4","2.3.9","1.8-12"]}]}]}
</script>
<!--/html_preserve-->


<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /container fluid -->

<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (_event) {
  if (window.bslib.Card) {
    window.bslib.Card.initializeAllCards();
  }
}); 
</script>
  



</body></html>